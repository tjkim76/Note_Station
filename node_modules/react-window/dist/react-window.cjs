"use client";"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const J=require("react/jsx-runtime"),o=require("react");function ce(e){let t=e;for(;t;){if(t.dir)return t.dir==="rtl";t=t.parentElement}return!1}function ae(e,t){const[s,r]=o.useState(t==="rtl");return o.useLayoutEffect(()=>{e&&(t||r(ce(e)))},[t,e]),s}const _=typeof window<"u"?o.useLayoutEffect:o.useEffect;function ee(e){if(e!==void 0)switch(typeof e){case"number":return e;case"string":{if(e.endsWith("px"))return parseFloat(e);break}}}function ue({box:e,defaultHeight:t,defaultWidth:s,disabled:r,element:n,mode:i,style:l}){const{styleHeight:f,styleWidth:c}=o.useMemo(()=>({styleHeight:ee(l?.height),styleWidth:ee(l?.width)}),[l?.height,l?.width]),[a,d]=o.useState({height:t,width:s}),u=r||i==="only-height"&&f!==void 0||i==="only-width"&&c!==void 0||f!==void 0&&c!==void 0;return _(()=>{if(n===null||u)return;const g=new ResizeObserver(p=>{for(const I of p){const{contentRect:h,target:w}=I;n===w&&d(y=>y.height===h.height&&y.width===h.width?y:{height:h.height,width:h.width})}});return g.observe(n,{box:e}),()=>{g?.unobserve(n)}},[e,u,n,f,c]),o.useMemo(()=>({height:f??a.height,width:c??a.width}),[a,f,c])}function te(e){const t=o.useRef(()=>{throw new Error("Cannot call during render.")});return _(()=>{t.current=e},[e]),o.useCallback(s=>t.current?.(s),[t])}let D=null;function fe(e=!1){if(D===null||e){const t=document.createElement("div"),s=t.style;s.width="50px",s.height="50px",s.overflow="scroll",s.direction="rtl";const r=document.createElement("div"),n=r.style;return n.width="100px",n.height="100px",t.appendChild(r),document.body.appendChild(t),t.scrollLeft>0?D="positive-descending":(t.scrollLeft=1,t.scrollLeft===0?D="negative":D="positive-ascending"),document.body.removeChild(t),D}return D}function N({containerElement:e,direction:t,isRtl:s,scrollOffset:r}){if(t==="horizontal"&&s)switch(fe()){case"negative":return-r;case"positive-descending":{if(e){const{clientWidth:n,scrollLeft:i,scrollWidth:l}=e;return l-n-i}break}}return r}function V(e,t="Assertion error"){if(!e)throw console.error(t),Error(t)}function F(e,t){if(e===t)return!0;if(!!e!=!!t||(V(e!==void 0),V(t!==void 0),Object.keys(e).length!==Object.keys(t).length))return!1;for(const s in e)if(!Object.is(t[s],e[s]))return!1;return!0}function se({cachedBounds:e,itemCount:t,itemSize:s}){if(t===0)return 0;if(typeof s=="number")return t*s;{const r=e.get(e.size===0?0:e.size-1);V(r!==void 0,"Unexpected bounds cache miss");const n=(r.scrollOffset+r.size)/e.size;return t*n}}function de({align:e,cachedBounds:t,index:s,itemCount:r,itemSize:n,containerScrollOffset:i,containerSize:l}){if(s<0||s>=r)throw RangeError(`Invalid index specified: ${s}`,{cause:`Index ${s} is not within the range of 0 - ${r-1}`});const f=se({cachedBounds:t,itemCount:r,itemSize:n}),c=t.get(s),a=Math.max(0,Math.min(f-l,c.scrollOffset)),d=Math.max(0,c.scrollOffset-l+c.size);switch(e==="smart"&&(i>=d&&i<=a?e="auto":e="center"),e){case"start":return a;case"end":return d;case"center":return c.scrollOffset<=l/2?0:c.scrollOffset+c.size/2>=f-l/2?f-l:c.scrollOffset+c.size/2-l/2;case"auto":default:return i>=d&&i<=a?i:i<d?d:a}}function Y({cachedBounds:e,containerScrollOffset:t,containerSize:s,itemCount:r,overscanCount:n}){const i=r-1;let l=0,f=-1,c=0,a=-1,d=0;for(;d<i;){const u=e.get(d);if(u.scrollOffset+u.size>t)break;d++}for(l=d,c=Math.max(0,l-n);d<i;){const u=e.get(d);if(u.scrollOffset+u.size>=t+s)break;d++}return f=Math.min(i,d),a=Math.min(r-1,f+n),l<0&&(l=0,f=-1,c=0,a=-1),{startIndexVisible:l,stopIndexVisible:f,startIndexOverscan:c,stopIndexOverscan:a}}function he({itemCount:e,itemProps:t,itemSize:s}){const r=new Map;return{get(n){for(V(n<e,`Invalid index ${n}`);r.size-1<n;){const l=r.size;let f;switch(typeof s){case"function":{f=s(l,t);break}case"number":{f=s;break}}if(l===0)r.set(l,{size:f,scrollOffset:0});else{const c=r.get(l-1);V(c!==void 0,`Unexpected bounds cache miss for index ${n}`),r.set(l,{scrollOffset:c.scrollOffset+c.size,size:f})}}const i=r.get(n);return V(i!==void 0,`Unexpected bounds cache miss for index ${n}`),i},set(n,i){r.set(n,i)},get size(){return r.size}}}function ge({itemCount:e,itemProps:t,itemSize:s}){return o.useMemo(()=>he({itemCount:e,itemProps:t,itemSize:s}),[e,t,s])}function pe({containerSize:e,itemSize:t}){let s;switch(typeof t){case"string":{V(t.endsWith("%"),`Invalid item size: "${t}"; string values must be percentages (e.g. "100%")`),V(e!==void 0,"Container size must be defined if a percentage item size is specified"),s=e*parseInt(t)/100;break}default:{s=t;break}}return s}function K({containerElement:e,containerStyle:t,defaultContainerSize:s=0,direction:r,isRtl:n=!1,itemCount:i,itemProps:l,itemSize:f,onResize:c,overscanCount:a}){const{height:d=s,width:u=s}=ue({defaultHeight:r==="vertical"?s:void 0,defaultWidth:r==="horizontal"?s:void 0,element:e,mode:r==="vertical"?"only-height":"only-width",style:t}),g=o.useRef({height:0,width:0}),p=r==="vertical"?d:u,I=pe({containerSize:p,itemSize:f});o.useLayoutEffect(()=>{if(typeof c=="function"){const x=g.current;(x.height!==d||x.width!==u)&&(c({height:d,width:u},{...x}),x.height=d,x.width=u)}},[d,c,u]);const h=ge({itemCount:i,itemProps:l,itemSize:I}),w=o.useCallback(x=>h.get(x),[h]),[y,O]=o.useState(()=>Y({cachedBounds:h,containerScrollOffset:0,containerSize:p,itemCount:i,overscanCount:a})),{startIndexVisible:B,startIndexOverscan:b,stopIndexVisible:G,stopIndexOverscan:M}={startIndexVisible:Math.min(i-1,y.startIndexVisible),startIndexOverscan:Math.min(i-1,y.startIndexOverscan),stopIndexVisible:Math.min(i-1,y.stopIndexVisible),stopIndexOverscan:Math.min(i-1,y.stopIndexOverscan)},z=o.useCallback(()=>se({cachedBounds:h,itemCount:i,itemSize:I}),[h,i,I]),A=o.useCallback(x=>{const T=N({containerElement:e,direction:r,isRtl:n,scrollOffset:x});return Y({cachedBounds:h,containerScrollOffset:T,containerSize:p,itemCount:i,overscanCount:a})},[h,e,p,r,n,i,a]);_(()=>{const x=(r==="vertical"?e?.scrollTop:e?.scrollLeft)??0;O(A(x))},[e,r,A]),_(()=>{if(!e)return;const x=()=>{O(T=>{const{scrollLeft:E,scrollTop:m}=e,v=N({containerElement:e,direction:r,isRtl:n,scrollOffset:r==="vertical"?m:E}),k=Y({cachedBounds:h,containerScrollOffset:v,containerSize:p,itemCount:i,overscanCount:a});return F(k,T)?T:k})};return e.addEventListener("scroll",x),()=>{e.removeEventListener("scroll",x)}},[h,e,p,r,i,a]);const S=te(({align:x="auto",containerScrollOffset:T,index:E})=>{let m=de({align:x,cachedBounds:h,containerScrollOffset:T,containerSize:p,index:E,itemCount:i,itemSize:I});if(e){if(m=N({containerElement:e,direction:r,isRtl:n,scrollOffset:m}),typeof e.scrollTo!="function"){const v=A(m);F(y,v)||O(v)}return m}});return{getCellBounds:w,getEstimatedSize:z,scrollToIndex:S,startIndexOverscan:b,startIndexVisible:B,stopIndexOverscan:M,stopIndexVisible:G}}function re(e){return o.useMemo(()=>e,Object.values(e))}function ne(e,t){const{ariaAttributes:s,style:r,...n}=e,{ariaAttributes:i,style:l,...f}=t;return F(s,i)&&F(r,l)&&F(n,f)}function xe({cellComponent:e,cellProps:t,children:s,className:r,columnCount:n,columnWidth:i,defaultHeight:l=0,defaultWidth:f=0,dir:c,gridRef:a,onCellsRendered:d,onResize:u,overscanCount:g=3,rowCount:p,rowHeight:I,style:h,tagName:w="div",...y}){const O=re(t),B=o.useMemo(()=>o.memo(e,ne),[e]),[b,G]=o.useState(null),M=ae(b,c),{getCellBounds:z,getEstimatedSize:A,startIndexOverscan:S,startIndexVisible:x,scrollToIndex:T,stopIndexOverscan:E,stopIndexVisible:m}=K({containerElement:b,containerStyle:h,defaultContainerSize:f,direction:"horizontal",isRtl:M,itemCount:n,itemProps:O,itemSize:i,onResize:u,overscanCount:g}),{getCellBounds:v,getEstimatedSize:k,startIndexOverscan:L,startIndexVisible:Z,scrollToIndex:C,stopIndexOverscan:U,stopIndexVisible:P}=K({containerElement:b,containerStyle:h,defaultContainerSize:l,direction:"vertical",itemCount:p,itemProps:O,itemSize:I,onResize:u,overscanCount:g});o.useImperativeHandle(a,()=>({get element(){return b},scrollToCell({behavior:$="auto",columnAlign:R="auto",columnIndex:H,rowAlign:j="auto",rowIndex:W}){const q=T({align:R,containerScrollOffset:b?.scrollLeft??0,index:H}),le=C({align:j,containerScrollOffset:b?.scrollTop??0,index:W});typeof b?.scrollTo=="function"&&b.scrollTo({behavior:$,left:q,top:le})},scrollToColumn({align:$="auto",behavior:R="auto",index:H}){const j=T({align:$,containerScrollOffset:b?.scrollLeft??0,index:H});typeof b?.scrollTo=="function"&&b.scrollTo({behavior:R,left:j})},scrollToRow({align:$="auto",behavior:R="auto",index:H}){const j=C({align:$,containerScrollOffset:b?.scrollTop??0,index:H});typeof b?.scrollTo=="function"&&b.scrollTo({behavior:R,top:j})}}),[b,T,C]),o.useEffect(()=>{S>=0&&E>=0&&L>=0&&U>=0&&d&&d({columnStartIndex:x,columnStopIndex:m,rowStartIndex:Z,rowStopIndex:P},{columnStartIndex:S,columnStopIndex:E,rowStartIndex:L,rowStopIndex:U})},[d,S,x,E,m,L,Z,U,P]);const oe=o.useMemo(()=>{const $=[];if(n>0&&p>0)for(let R=L;R<=U;R++){const H=v(R),j=[];for(let W=S;W<=E;W++){const q=z(W);j.push(o.createElement(B,{...O,ariaAttributes:{"aria-colindex":W+1,role:"gridcell"},columnIndex:W,key:W,rowIndex:R,style:{position:"absolute",left:M?void 0:0,right:M?0:void 0,transform:`translate(${M?-q.scrollOffset:q.scrollOffset}px, ${H.scrollOffset}px)`,height:H.size,width:q.size}}))}$.push(J.jsx("div",{role:"row","aria-rowindex":R+1,children:j},R))}return $},[B,O,n,S,E,z,v,M,p,L,U]),ie=J.jsx("div",{"aria-hidden":!0,style:{height:k(),width:A(),zIndex:-1}});return o.createElement(w,{"aria-colcount":n,"aria-rowcount":p,role:"grid",...y,className:r,dir:c,ref:G,style:{position:"relative",maxHeight:"100%",maxWidth:"100%",flexGrow:1,overflow:"auto",...h}},oe,s,ie)}const be=o.useState,ve=o.useRef;function me(e){return e!=null&&typeof e=="object"&&"getAverageRowHeight"in e&&typeof e.getAverageRowHeight=="function"}const Q="data-react-window-index";function Ie({children:e,className:t,defaultHeight:s=0,listRef:r,onResize:n,onRowsRendered:i,overscanCount:l=3,rowComponent:f,rowCount:c,rowHeight:a,rowProps:d,tagName:u="div",style:g,...p}){const I=re(d),h=o.useMemo(()=>o.memo(f,ne),[f]),[w,y]=o.useState(null),O=me(a),B=o.useMemo(()=>O?m=>a.getRowHeight(m)??a.getAverageRowHeight():a,[O,a]),{getCellBounds:b,getEstimatedSize:G,scrollToIndex:M,startIndexOverscan:z,startIndexVisible:A,stopIndexOverscan:S,stopIndexVisible:x}=K({containerElement:w,containerStyle:g,defaultContainerSize:s,direction:"vertical",itemCount:c,itemProps:I,itemSize:B,onResize:n,overscanCount:l});o.useImperativeHandle(r,()=>({get element(){return w},scrollToRow({align:m="auto",behavior:v="auto",index:k}){const L=M({align:m,containerScrollOffset:w?.scrollTop??0,index:k});typeof w?.scrollTo=="function"&&w.scrollTo({behavior:v,top:L})}}),[w,M]),_(()=>{if(!w)return;const m=Array.from(w.children).filter((v,k)=>{if(v.hasAttribute("aria-hidden"))return!1;const L=`${z+k}`;return v.setAttribute(Q,L),!0});if(O)return a.observeRowElements(m)},[w,O,a,z,S]),o.useEffect(()=>{z>=0&&S>=0&&i&&i({startIndex:A,stopIndex:x},{startIndex:z,stopIndex:S})},[i,z,A,S,x]);const T=o.useMemo(()=>{const m=[];if(c>0)for(let v=z;v<=S;v++){const k=b(v);m.push(o.createElement(h,{...I,ariaAttributes:{"aria-posinset":v+1,"aria-setsize":c,role:"listitem"},key:v,index:v,style:{position:"absolute",left:0,transform:`translateY(${k.scrollOffset}px)`,height:O?void 0:k.size,width:"100%"}}))}return m},[h,b,O,c,I,z,S]),E=J.jsx("div",{"aria-hidden":!0,style:{height:G(),width:"100%",zIndex:-1}});return o.createElement(u,{role:"list",...p,className:t,ref:y,style:{position:"relative",maxHeight:"100%",flexGrow:1,overflowY:"auto",...g}},T,e,E)}function we({defaultRowHeight:e,key:t}){const[s,r]=o.useState({key:t,map:new Map});s.key!==t&&r({key:t,map:new Map});const{map:n}=s,i=o.useCallback(()=>{let u=0;return n.forEach(g=>{u+=g}),u===0?e:u/n.size},[e,n]),l=o.useCallback(u=>{const g=n.get(u);return g!==void 0?g:(n.set(u,e),e)},[e,n]),f=o.useCallback((u,g)=>{r(p=>{if(p.map.get(u)===g)return p;const I=new Map(p.map);return I.set(u,g),{...p,map:I}})},[]),c=te(u=>{u.length!==0&&u.forEach(g=>{const{borderBoxSize:p,target:I}=g,h=I.getAttribute(Q);V(h!==null,`Invalid ${Q} attribute value`);const w=parseInt(h),{blockSize:y}=p[0];y&&f(w,y)})}),[a]=o.useState(()=>{if(typeof ResizeObserver<"u")return new ResizeObserver(c)});o.useEffect(()=>{if(a)return()=>{a.disconnect()}},[a]);const d=o.useCallback(u=>a?(u.forEach(g=>a.observe(g)),()=>{u.forEach(g=>a.unobserve(g))}):()=>{},[a]);return o.useMemo(()=>({getAverageRowHeight:i,getRowHeight:l,setRowHeight:f,observeRowElements:d}),[i,l,f,d])}const ye=o.useState,Oe=o.useRef;let X=-1;function Se(e=!1){if(X===-1||e){const t=document.createElement("div"),s=t.style;s.width="50px",s.height="50px",s.overflow="scroll",document.body.appendChild(t),X=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return X}exports.Grid=xe;exports.List=Ie;exports.getScrollbarSize=Se;exports.useDynamicRowHeight=we;exports.useGridCallbackRef=be;exports.useGridRef=ve;exports.useListCallbackRef=ye;exports.useListRef=Oe;
//# sourceMappingURL=react-window.cjs.map
