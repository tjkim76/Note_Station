import{c as W,r as p,j as o,R as de,f as Ne}from"./index-CbfCBuWl.js";import{R as pe,C as ve,L as xe,S as ye}from"./search-6T5g-zxl.js";import{T as fe,P as De}from"./trash-2-PYgddBW5.js";import{C as Me,T as Ee}from"./trash-5pbN9doL.js";const we=W("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),je=W("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Ie=W("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),ke=W("FolderInput",[["path",{d:"M2 9V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-1",key:"1gu97c"}],["path",{d:"M2 13h10",key:"pgb2dq"}],["path",{d:"m9 16 3-3-3-3",key:"6m91ic"}]]),Se=W("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Oe=W("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]);function re(){return re=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},re.apply(null,arguments)}function ie(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function se(s,e){return se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},se(s,e)}function Te(s,e){s.prototype=Object.create(e.prototype),s.prototype.constructor=s,se(s,e)}var oe=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Ce(s,e){return!!(s===e||oe(s)&&oe(e))}function Ve(s,e){if(s.length!==e.length)return!1;for(var r=0;r<s.length;r++)if(!Ce(s[r],e[r]))return!1;return!0}function ee(s,e){e===void 0&&(e=Ve);var r,n=[],a,u=!1;function m(){for(var c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];return u&&r===this&&e(c,n)||(a=s.apply(this,c),u=!0,r=this,n=c),a}return m}var Le=typeof performance=="object"&&typeof performance.now=="function",ae=Le?function(){return performance.now()}:function(){return Date.now()};function le(s){cancelAnimationFrame(s.id)}function ze(s,e){var r=ae();function n(){ae()-r>=e?s.call(null):a.id=requestAnimationFrame(n)}var a={id:requestAnimationFrame(n)};return a}var te=-1;function ce(s){if(s===void 0&&(s=!1),te===-1||s){var e=document.createElement("div"),r=e.style;r.width="50px",r.height="50px",r.overflow="scroll",document.body.appendChild(e),te=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return te}var A=null;function ue(s){if(s===void 0&&(s=!1),A===null||s){var e=document.createElement("div"),r=e.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";var n=document.createElement("div"),a=n.style;return a.width="100px",a.height="100px",e.appendChild(n),document.body.appendChild(e),e.scrollLeft>0?A="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?A="negative":A="positive-ascending"),document.body.removeChild(e),A}return A}var _e=150,Re=function(e,r){return e},Y=null,Z=null;typeof window<"u"&&typeof window.WeakSet<"u"&&(Y=new WeakSet,Z=new WeakSet);function $e(s){var e,r=s.getItemOffset,n=s.getEstimatedTotalSize,a=s.getItemSize,u=s.getOffsetForIndexAndAlignment,m=s.getStartIndexForOffset,c=s.getStopIndexForStartIndex,h=s.initInstanceProps,g=s.shouldResetStyleCacheOnItemSizeChange,d=s.validateProps;return e=(function(y){Te(j,y);function j(M){var t;return t=y.call(this,M)||this,t._instanceProps=h(t.props,ie(t)),t._outerRef=void 0,t._resetIsScrollingTimeoutId=null,t.state={instance:ie(t),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof t.props.initialScrollOffset=="number"?t.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},t._callOnItemsRendered=void 0,t._callOnItemsRendered=ee(function(i,l,b,f){return t.props.onItemsRendered({overscanStartIndex:i,overscanStopIndex:l,visibleStartIndex:b,visibleStopIndex:f})}),t._callOnScroll=void 0,t._callOnScroll=ee(function(i,l,b){return t.props.onScroll({scrollDirection:i,scrollOffset:l,scrollUpdateWasRequested:b})}),t._getItemStyle=void 0,t._getItemStyle=function(i){var l=t.props,b=l.direction,f=l.itemSize,v=l.layout,N=t._getItemStyleCache(g&&f,g&&v,g&&b),x;if(N.hasOwnProperty(i))x=N[i];else{var D=r(t.props,i,t._instanceProps),I=a(t.props,i,t._instanceProps),C=b==="horizontal"||v==="horizontal",L=b==="rtl",E=C?D:0;N[i]=x={position:"absolute",left:L?void 0:E,right:L?E:void 0,top:C?0:D,height:C?"100%":I,width:C?I:"100%"}}return x},t._getItemStyleCache=void 0,t._getItemStyleCache=ee(function(i,l,b){return{}}),t._onScrollHorizontal=function(i){var l=i.currentTarget,b=l.clientWidth,f=l.scrollLeft,v=l.scrollWidth;t.setState(function(N){if(N.scrollOffset===f)return null;var x=t.props.direction,D=f;if(x==="rtl")switch(ue()){case"negative":D=-f;break;case"positive-descending":D=v-b-f;break}return D=Math.max(0,Math.min(D,v-b)),{isScrolling:!0,scrollDirection:N.scrollOffset<D?"forward":"backward",scrollOffset:D,scrollUpdateWasRequested:!1}},t._resetIsScrollingDebounced)},t._onScrollVertical=function(i){var l=i.currentTarget,b=l.clientHeight,f=l.scrollHeight,v=l.scrollTop;t.setState(function(N){if(N.scrollOffset===v)return null;var x=Math.max(0,Math.min(v,f-b));return{isScrolling:!0,scrollDirection:N.scrollOffset<x?"forward":"backward",scrollOffset:x,scrollUpdateWasRequested:!1}},t._resetIsScrollingDebounced)},t._outerRefSetter=function(i){var l=t.props.outerRef;t._outerRef=i,typeof l=="function"?l(i):l!=null&&typeof l=="object"&&l.hasOwnProperty("current")&&(l.current=i)},t._resetIsScrollingDebounced=function(){t._resetIsScrollingTimeoutId!==null&&le(t._resetIsScrollingTimeoutId),t._resetIsScrollingTimeoutId=ze(t._resetIsScrolling,_e)},t._resetIsScrolling=function(){t._resetIsScrollingTimeoutId=null,t.setState({isScrolling:!1},function(){t._getItemStyleCache(-1,null)})},t}j.getDerivedStateFromProps=function(t,i){return Ae(t,i),d(t),null};var w=j.prototype;return w.scrollTo=function(t){t=Math.max(0,t),this.setState(function(i){return i.scrollOffset===t?null:{scrollDirection:i.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},w.scrollToItem=function(t,i){i===void 0&&(i="auto");var l=this.props,b=l.itemCount,f=l.layout,v=this.state.scrollOffset;t=Math.max(0,Math.min(t,b-1));var N=0;if(this._outerRef){var x=this._outerRef;f==="vertical"?N=x.scrollWidth>x.clientWidth?ce():0:N=x.scrollHeight>x.clientHeight?ce():0}this.scrollTo(u(this.props,t,i,v,this._instanceProps,N))},w.componentDidMount=function(){var t=this.props,i=t.direction,l=t.initialScrollOffset,b=t.layout;if(typeof l=="number"&&this._outerRef!=null){var f=this._outerRef;i==="horizontal"||b==="horizontal"?f.scrollLeft=l:f.scrollTop=l}this._callPropsCallbacks()},w.componentDidUpdate=function(){var t=this.props,i=t.direction,l=t.layout,b=this.state,f=b.scrollOffset,v=b.scrollUpdateWasRequested;if(v&&this._outerRef!=null){var N=this._outerRef;if(i==="horizontal"||l==="horizontal")if(i==="rtl")switch(ue()){case"negative":N.scrollLeft=-f;break;case"positive-ascending":N.scrollLeft=f;break;default:var x=N.clientWidth,D=N.scrollWidth;N.scrollLeft=D-x-f;break}else N.scrollLeft=f;else N.scrollTop=f}this._callPropsCallbacks()},w.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&le(this._resetIsScrollingTimeoutId)},w.render=function(){var t=this.props,i=t.children,l=t.className,b=t.direction,f=t.height,v=t.innerRef,N=t.innerElementType,x=t.innerTagName,D=t.itemCount,I=t.itemData,C=t.itemKey,L=C===void 0?Re:C,E=t.layout,U=t.outerElementType,H=t.outerTagName,P=t.style,q=t.useIsScrolling,G=t.width,z=this.state.isScrolling,$=b==="horizontal"||E==="horizontal",X=$?this._onScrollHorizontal:this._onScrollVertical,_=this._getRangeToRender(),J=_[0],Q=_[1],S=[];if(D>0)for(var T=J;T<=Q;T++)S.push(p.createElement(i,{data:I,key:L(T,I),index:T,isScrolling:q?z:void 0,style:this._getItemStyle(T)}));var R=n(this.props,this._instanceProps);return p.createElement(U||H||"div",{className:l,onScroll:X,ref:this._outerRefSetter,style:re({position:"relative",height:f,width:G,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:b},P)},p.createElement(N||x||"div",{children:S,ref:v,style:{height:$?"100%":R,pointerEvents:z?"none":void 0,width:$?R:"100%"}}))},w._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var t=this.props.itemCount;if(t>0){var i=this._getRangeToRender(),l=i[0],b=i[1],f=i[2],v=i[3];this._callOnItemsRendered(l,b,f,v)}}if(typeof this.props.onScroll=="function"){var N=this.state,x=N.scrollDirection,D=N.scrollOffset,I=N.scrollUpdateWasRequested;this._callOnScroll(x,D,I)}},w._getRangeToRender=function(){var t=this.props,i=t.itemCount,l=t.overscanCount,b=this.state,f=b.isScrolling,v=b.scrollDirection,N=b.scrollOffset;if(i===0)return[0,0,0,0];var x=m(this.props,N,this._instanceProps),D=c(this.props,x,N,this._instanceProps),I=!f||v==="backward"?Math.max(1,l):1,C=!f||v==="forward"?Math.max(1,l):1;return[Math.max(0,x-I),Math.max(0,Math.min(i-1,D+C)),x,D]},j})(p.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},e}var Ae=function(e,r){var n=e.children,a=e.direction,u=e.height,m=e.layout,c=e.innerTagName,h=e.outerTagName,g=e.width,d=r.instance;{(c!=null||h!=null)&&Z&&!Z.has(d)&&Z.add(d);var y=a==="horizontal"||m==="horizontal";switch(a){case"horizontal":case"vertical":Y&&!Y.has(d)&&Y.add(d);break;case"ltr":case"rtl":break;default:throw Error('An invalid "direction" prop has been specified. Value should be either "ltr" or "rtl". '+('"'+a+'" was specified.'))}switch(m){case"horizontal":case"vertical":break;default:throw Error('An invalid "layout" prop has been specified. Value should be either "horizontal" or "vertical". '+('"'+m+'" was specified.'))}if(n==null)throw Error('An invalid "children" prop has been specified. Value should be a React component. '+('"'+(n===null?"null":typeof n)+'" was specified.'));if(y&&typeof g!="number")throw Error('An invalid "width" prop has been specified. Horizontal lists must specify a number for width. '+('"'+(g===null?"null":typeof g)+'" was specified.'));if(!y&&typeof u!="number")throw Error('An invalid "height" prop has been specified. Vertical lists must specify a number for height. '+('"'+(u===null?"null":typeof u)+'" was specified.'))}},Fe=50,F=function(e,r,n){var a=e,u=a.itemSize,m=n.itemMetadataMap,c=n.lastMeasuredIndex;if(r>c){var h=0;if(c>=0){var g=m[c];h=g.offset+g.size}for(var d=c+1;d<=r;d++){var y=u(d);m[d]={offset:h,size:y},h+=y}n.lastMeasuredIndex=r}return m[r]},We=function(e,r,n){var a=r.itemMetadataMap,u=r.lastMeasuredIndex,m=u>0?a[u].offset:0;return m>=n?he(e,r,u,0,n):Pe(e,r,Math.max(0,u),n)},he=function(e,r,n,a,u){for(;a<=n;){var m=a+Math.floor((n-a)/2),c=F(e,m,r).offset;if(c===u)return m;c<u?a=m+1:c>u&&(n=m-1)}return a>0?a-1:0},Pe=function(e,r,n,a){for(var u=e.itemCount,m=1;n<u&&F(e,n,r).offset<a;)n+=m,m*=2;return he(e,r,Math.min(n,u-1),Math.floor(n/2),a)},me=function(e,r){var n=e.itemCount,a=r.itemMetadataMap,u=r.estimatedItemSize,m=r.lastMeasuredIndex,c=0;if(m>=n&&(m=n-1),m>=0){var h=a[m];c=h.offset+h.size}var g=n-m-1,d=g*u;return c+d},qe=$e({getItemOffset:function(e,r,n){return F(e,r,n).offset},getItemSize:function(e,r,n){return n.itemMetadataMap[r].size},getEstimatedTotalSize:me,getOffsetForIndexAndAlignment:function(e,r,n,a,u,m){var c=e.direction,h=e.height,g=e.layout,d=e.width,y=c==="horizontal"||g==="horizontal",j=y?d:h,w=F(e,r,u),M=me(e,u),t=Math.max(0,Math.min(M-j,w.offset)),i=Math.max(0,w.offset-j+w.size+m);switch(n==="smart"&&(a>=i-j&&a<=t+j?n="auto":n="center"),n){case"start":return t;case"end":return i;case"center":return Math.round(i+(t-i)/2);default:return a>=i&&a<=t?a:a<i?i:t}},getStartIndexForOffset:function(e,r,n){return We(e,n,r)},getStopIndexForStartIndex:function(e,r,n,a){for(var u=e.direction,m=e.height,c=e.itemCount,h=e.layout,g=e.width,d=u==="horizontal"||h==="horizontal",y=d?g:m,j=F(e,r,a),w=n+y,M=j.offset+j.size,t=r;t<c-1&&M<w;)t++,M+=F(e,t,a).size;return t},initInstanceProps:function(e,r){var n=e,a=n.estimatedItemSize,u={itemMetadataMap:{},estimatedItemSize:a||Fe,lastMeasuredIndex:-1};return r.resetAfterIndex=function(m,c){c===void 0&&(c=!0),u.lastMeasuredIndex=Math.min(u.lastMeasuredIndex,m-1),r._getItemStyleCache(-1),c&&r.forceUpdate()},u},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){var r=e.itemSize;if(typeof r!="function")throw Error('An invalid "itemSize" prop has been specified. Value should be a function. '+('"'+(r===null?"null":typeof r)+'" was specified.'))}});function Ue(s,e){if(s.style!==e.style&&(s.style.top!==e.style.top||s.style.left!==e.style.left||s.style.width!==e.style.width||s.style.height!==e.style.height)||s.isSelected!==e.isSelected||s.isMultiSelected!==e.isMultiSelected||s.isDragOver!==e.isDragOver||s.showPinnedDivider!==e.showPinnedDivider)return!1;const r=s.note,n=e.note;return!(r!==n&&(r.id!==n.id||r.title!==n.title||r.plainText!==n.plainText||r.updatedAt!==n.updatedAt||r.isPinned!==n.isPinned||r.isDeleted!==n.isDeleted||r.categoryId!==n.categoryId||r.content!==n.content||r.tags!==n.tags&&(!r.tags||!n.tags||r.tags.length!==n.tags.length||!r.tags.every((a,u)=>a===n.tags[u])))||s.categoryName!==e.categoryName)}const He=de.memo(function({note:e,categoryName:r,isSelected:n,isMultiSelected:a,onNoteClick:u,onDoubleClick:m,onDelete:c,onDragStart:h,onDragOver:g,onDrop:d,isDragOver:y,onPin:j,onContextMenu:w,onRestore:M,style:t,showPinnedDivider:i}){const l=e.plainText||"내용 없음",b=p.useCallback(E=>h(E,e.id),[h,e.id]),f=p.useCallback(E=>w(E,e.id),[w,e.id]),v=p.useCallback(E=>u(E,e),[u,e]),N=p.useCallback(E=>{E.stopPropagation(),j(e.id)},[j,e.id]),x=p.useCallback(E=>{E.stopPropagation(),c(e.id)},[c,e.id]),D=p.useCallback(E=>{E.stopPropagation(),M(e.id)},[M,e.id]),I=p.useCallback(()=>m(e),[m,e]),C=p.useCallback(E=>g&&g(E,e.id),[g,e.id]),L=p.useCallback(E=>d&&d(E,e.id),[d,e.id]);return o.jsxDEV("div",{style:{...t,viewTransitionName:`note-${e.id}`},draggable:"true",onDragOver:C,onDrop:L,onDragStart:b,onContextMenu:f,onClick:v,onDoubleClick:I,className:`group relative p-4 border-b border-gray-50 dark:border-gray-800 cursor-pointer transition-all duration-200 ${n?"bg-blue-50/60 dark:bg-blue-900/30":a?"bg-slate-100 dark:bg-gray-700":y?"border-t-2 border-t-blue-500 bg-blue-50/30 dark:bg-blue-900/10":"hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[n&&o.jsxDEV("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-blue-500 rounded-r-full"},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListItem.jsx",lineNumber:90,columnNumber:22},this),i&&o.jsxDEV("div",{className:"absolute top-0 left-0 right-0 h-2 bg-gradient-to-b from-gray-100 dark:from-gray-800 to-transparent pointer-events-none z-10 border-t border-gray-200 dark:border-gray-700"},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListItem.jsx",lineNumber:93,columnNumber:9},this),o.jsxDEV("div",{className:"flex items-start justify-between gap-2",children:[o.jsxDEV("div",{className:"flex-1 min-w-0",children:[o.jsxDEV("div",{className:"flex items-center gap-2 mb-1",children:[o.jsxDEV("h3",{className:`font-semibold break-words ${n?"text-blue-700 dark:text-blue-400":"text-gray-800 dark:text-gray-100"}`,children:e.title},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListItem.jsx",lineNumber:99,columnNumber:13},this),o.jsxDEV("span",{className:"text-[10px] px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-300 rounded-md flex-shrink-0 font-medium",children:r},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListItem.jsx",lineNumber:100,columnNumber:13},this)]},void 0,!0,{fileName:"D:/MEMO/src/components/NoteListItem.jsx",lineNumber:98,columnNumber:11},this),e.tags&&e.tags.length>0&&o.jsxDEV("div",{className:"flex flex-wrap gap-1 mb-1",children:e.tags.map(E=>o.jsxDEV("span",{className:"text-[10px] text-blue-500 dark:text-blue-300",children:["#",E]},E,!0,{fileName:"D:/MEMO/src/components/NoteListItem.jsx",lineNumber:106,columnNumber:37},this))},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListItem.jsx",lineNumber:105,columnNumber:13},this),o.jsxDEV("p",{className:"text-sm text-gray-500 dark:text-gray-300 mt-1 font-light line-clamp-2 break-words",children:l},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListItem.jsx",lineNumber:109,columnNumber:11},this),o.jsxDEV("p",{className:"text-xs text-gray-400 dark:text-gray-400 mt-2",children:Ne(e.updatedAt)},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListItem.jsx",lineNumber:110,columnNumber:11},this)]},void 0,!0,{fileName:"D:/MEMO/src/components/NoteListItem.jsx",lineNumber:97,columnNumber:9},this),o.jsxDEV("button",{onClick:e.isDeleted?D:N,className:`p-1.5 rounded-md transition-colors ${e.isDeleted?"text-green-500 hover:bg-green-50 dark:hover:bg-green-900/30 opacity-0 group-hover:opacity-100":e.isPinned?"text-blue-500 bg-blue-50 dark:bg-blue-900/30":"text-gray-400 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 opacity-0 group-hover:opacity-100"}`,title:e.isDeleted?"복구":e.isPinned?"고정 해제":"상단 고정",children:e.isDeleted?o.jsxDEV(pe,{className:"w-4 h-4"},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListItem.jsx",lineNumber:124,columnNumber:13},this):o.jsxDEV(Oe,{className:`w-4 h-4 ${e.isPinned?"fill-current":""}`},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListItem.jsx",lineNumber:126,columnNumber:13},this)},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListItem.jsx",lineNumber:112,columnNumber:9},this),o.jsxDEV("button",{onClick:x,className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-md transition-colors opacity-0 group-hover:opacity-100",title:e.isDeleted?"영구 삭제":"삭제",children:o.jsxDEV(fe,{className:"w-4 h-4"},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListItem.jsx",lineNumber:134,columnNumber:11},this)},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListItem.jsx",lineNumber:129,columnNumber:9},this)]},void 0,!0,{fileName:"D:/MEMO/src/components/NoteListItem.jsx",lineNumber:96,columnNumber:7},this)]},void 0,!0,{fileName:"D:/MEMO/src/components/NoteListItem.jsx",lineNumber:77,columnNumber:5},this)},Ue),Be=({index:s,style:e,data:r})=>{const{notes:n,categories:a,selectedNoteId:u,selectedNotesSet:m,onNoteClick:c,onDoubleClick:h,onDragStart:g,onDragOver:d,onDrop:y,dragOverNoteId:j,onPin:w,onContextMenu:M,onDelete:t,onRestore:i,setSize:l,resizeObserver:b}=r,f=n[s],v=n[s-1],N=f&&!f.isPinned&&v&&v.isPinned,x=a.find(I=>I.id===f.categoryId)?.name||"개인",D=p.useRef(null);return p.useLayoutEffect(()=>{D.current&&l(s,D.current.getBoundingClientRect().height)},[l,s,f,N,a]),p.useEffect(()=>{const I=D.current;if(!(!I||!b))return b.observe(I),()=>b.unobserve(I)},[b,s]),o.jsxDEV("div",{style:e,children:o.jsxDEV("div",{ref:D,"data-index":s,children:o.jsxDEV(He,{note:f,categoryName:x,isSelected:u===f.id,isMultiSelected:m.has(f.id),onNoteClick:c,onDoubleClick:h,onDragStart:g,onDragOver:d,onDrop:y,isDragOver:j===f.id,onPin:w,onContextMenu:M,onDelete:t,onRestore:i,showPinnedDivider:N},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListItem.jsx",lineNumber:169,columnNumber:9},void 0)},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListItem.jsx",lineNumber:168,columnNumber:7},void 0)},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListItem.jsx",lineNumber:167,columnNumber:5},void 0)};function Ke({notes:s,selectedDate:e,onSelectDate:r}){const[n,a]=p.useState(new Date),u=(t,i)=>new Date(t,i+1,0).getDate(),m=(t,i)=>new Date(t,i,1).getDay(),c=n.getFullYear(),h=n.getMonth(),g=u(c,h),d=m(c,h),y=()=>a(new Date(c,h-1,1)),j=()=>a(new Date(c,h+1,1)),w=p.useMemo(()=>{const t={};return s.forEach(i=>{const l=new Date(i.createdAt).toDateString();t[l]||(t[l]=[]),t[l].push(i)}),t},[s]),M=()=>{const t=[];for(let i=0;i<d;i++)t.push(o.jsxDEV("div",{className:"h-8 w-8"},`empty-${i}`,!1,{fileName:"D:/MEMO/src/components/CalendarView.jsx",lineNumber:35,columnNumber:17},this));for(let i=1;i<=g;i++){const l=new Date(c,h,i),b=l.toDateString(),f=w[b]?.length>0,v=e&&e.toDateString()===b,N=new Date().toDateString()===b;t.push(o.jsxDEV("button",{onClick:()=>r(v?null:l),className:`h-8 w-8 rounded-full flex items-center justify-center text-sm relative transition-colors
            ${v?"bg-blue-500 text-white":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"}
            ${N&&!v?"border border-blue-500 text-blue-500":""}
          `,children:[i,f&&!v&&o.jsxDEV("div",{className:"absolute bottom-1 w-1 h-1 bg-blue-500 rounded-full"},void 0,!1,{fileName:"D:/MEMO/src/components/CalendarView.jsx",lineNumber:56,columnNumber:13},this),f&&v&&o.jsxDEV("div",{className:"absolute bottom-1 w-1 h-1 bg-white rounded-full"},void 0,!1,{fileName:"D:/MEMO/src/components/CalendarView.jsx",lineNumber:59,columnNumber:14},this)]},i,!0,{fileName:"D:/MEMO/src/components/CalendarView.jsx",lineNumber:46,columnNumber:9},this))}return t};return o.jsxDEV("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:[o.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[o.jsxDEV("button",{onClick:y,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full",children:o.jsxDEV(Me,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"},void 0,!1,{fileName:"D:/MEMO/src/components/CalendarView.jsx",lineNumber:71,columnNumber:11},this)},void 0,!1,{fileName:"D:/MEMO/src/components/CalendarView.jsx",lineNumber:70,columnNumber:9},this),o.jsxDEV("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:[c,"년 ",h+1,"월"]},void 0,!0,{fileName:"D:/MEMO/src/components/CalendarView.jsx",lineNumber:73,columnNumber:9},this),o.jsxDEV("button",{onClick:j,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full",children:o.jsxDEV(je,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"},void 0,!1,{fileName:"D:/MEMO/src/components/CalendarView.jsx",lineNumber:77,columnNumber:11},this)},void 0,!1,{fileName:"D:/MEMO/src/components/CalendarView.jsx",lineNumber:76,columnNumber:9},this)]},void 0,!0,{fileName:"D:/MEMO/src/components/CalendarView.jsx",lineNumber:69,columnNumber:7},this),o.jsxDEV("div",{className:"grid grid-cols-7 gap-1 text-center mb-2",children:["일","월","화","수","목","금","토"].map(t=>o.jsxDEV("div",{className:"text-xs text-gray-400 font-medium",children:t},t,!1,{fileName:"D:/MEMO/src/components/CalendarView.jsx",lineNumber:82,columnNumber:11},this))},void 0,!1,{fileName:"D:/MEMO/src/components/CalendarView.jsx",lineNumber:80,columnNumber:7},this),o.jsxDEV("div",{className:"grid grid-cols-7 gap-1 justify-items-center",children:M()},void 0,!1,{fileName:"D:/MEMO/src/components/CalendarView.jsx",lineNumber:85,columnNumber:7},this)]},void 0,!0,{fileName:"D:/MEMO/src/components/CalendarView.jsx",lineNumber:68,columnNumber:5},this)}function Ye({isSidebarOpen:s,toggleSidebar:e,showCalendar:r,setShowCalendar:n,showTodo:a,setShowTodo:u,selectedNotes:m,selectedCategory:c,setContextMenu:h,deleteMultipleNotes:g,setModals:d,dbReady:y,createNewNote:j,emptyTrash:w,searchTerm:M,setSearchTerm:t}){return o.jsxDEV("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex-shrink-0",children:[o.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[!s&&o.jsxDEV("button",{onClick:e,className:"mr-2 p-1.5 text-gray-500 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md transition-colors",title:"사이드바 펼치기",children:o.jsxDEV(Se,{className:"w-5 h-5"},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListToolbar.jsx",lineNumber:29,columnNumber:13},this)},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListToolbar.jsx",lineNumber:28,columnNumber:11},this),o.jsxDEV("button",{onClick:()=>n(!r),className:`mr-2 p-1.5 rounded-md transition-colors ${r?"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400":"text-gray-500 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}`,title:"캘린더 뷰",children:o.jsxDEV(we,{className:"w-5 h-5"},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListToolbar.jsx",lineNumber:37,columnNumber:11},this)},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListToolbar.jsx",lineNumber:32,columnNumber:9},this),o.jsxDEV("button",{onClick:()=>{u(!a),a||n(!1)},className:`mr-2 p-1.5 rounded-md transition-colors ${a?"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400":"text-gray-500 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}`,title:"할 일(To-Do)만 보기",children:o.jsxDEV(ve,{className:"w-5 h-5"},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListToolbar.jsx",lineNumber:44,columnNumber:11},this)},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListToolbar.jsx",lineNumber:39,columnNumber:9},this),m.size>1?o.jsxDEV(o.Fragment,{children:[o.jsxDEV("h1",{className:"text-xl font-bold text-blue-600",children:[m.size,"개 선택됨"]},void 0,!0,{fileName:"D:/MEMO/src/components/NoteListToolbar.jsx",lineNumber:48,columnNumber:13},this),o.jsxDEV("div",{className:"flex gap-2",children:[c!=="trash"&&o.jsxDEV("button",{onClick:i=>h({visible:!0,x:i.clientX,y:i.clientY+20,noteId:null}),className:"p-1.5 text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-md transition-colors",title:"선택한 노트 이동",children:o.jsxDEV(ke,{className:"w-5 h-5"},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListToolbar.jsx",lineNumber:53,columnNumber:17},this)},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListToolbar.jsx",lineNumber:52,columnNumber:48},this),o.jsxDEV("button",{onClick:g,className:"p-1.5 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-md transition-colors",title:"선택한 노트 모두 삭제",children:o.jsxDEV(fe,{className:"w-5 h-5"},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListToolbar.jsx",lineNumber:56,columnNumber:17},this)},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListToolbar.jsx",lineNumber:55,columnNumber:15},this)]},void 0,!0,{fileName:"D:/MEMO/src/components/NoteListToolbar.jsx",lineNumber:51,columnNumber:13},this)]},void 0,!0,{fileName:"D:/MEMO/src/components/NoteListToolbar.jsx",lineNumber:47,columnNumber:11},this):o.jsxDEV(o.Fragment,{children:[o.jsxDEV("h1",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[c==="trash"?o.jsxDEV(Ee,{className:"w-5 h-5 text-red-500"},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListToolbar.jsx",lineNumber:63,columnNumber:47},this):o.jsxDEV(Ie,{className:"w-5 h-5 text-blue-500 dark:text-blue-400"},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListToolbar.jsx",lineNumber:63,columnNumber:92},this),c==="trash"?"휴지통":"노트 목록"]},void 0,!0,{fileName:"D:/MEMO/src/components/NoteListToolbar.jsx",lineNumber:62,columnNumber:13},this),o.jsxDEV("div",{className:"flex gap-2",children:c!=="trash"?o.jsxDEV(o.Fragment,{children:[o.jsxDEV("button",{onClick:()=>d(i=>({...i,template:!0})),disabled:!y,className:`p-1.5 text-gray-500 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md transition-colors ${y?"":"opacity-50 cursor-not-allowed"}`,title:"템플릿 목록",children:o.jsxDEV(xe,{className:"w-5 h-5"},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListToolbar.jsx",lineNumber:73,columnNumber:13},this)},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListToolbar.jsx",lineNumber:67,columnNumber:46},this),o.jsxDEV("button",{onClick:j,disabled:!y,className:`p-1.5 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors shadow-sm ${y?"":"opacity-50 cursor-not-allowed"}`,title:"새 노트 만들기",children:o.jsxDEV(De,{className:"w-5 h-5"},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListToolbar.jsx",lineNumber:81,columnNumber:13},this)},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListToolbar.jsx",lineNumber:75,columnNumber:11},this)]},void 0,!0,{fileName:"D:/MEMO/src/components/NoteListToolbar.jsx",lineNumber:67,columnNumber:44},this):o.jsxDEV("button",{onClick:w,disabled:!y,className:`px-3 py-1.5 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-md hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors text-xs font-bold ${y?"":"opacity-50 cursor-not-allowed"}`,children:"휴지통 비우기"},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListToolbar.jsx",lineNumber:83,columnNumber:13},this)},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListToolbar.jsx",lineNumber:66,columnNumber:13},this)]},void 0,!0,{fileName:"D:/MEMO/src/components/NoteListToolbar.jsx",lineNumber:61,columnNumber:11},this)]},void 0,!0,{fileName:"D:/MEMO/src/components/NoteListToolbar.jsx",lineNumber:26,columnNumber:7},this),o.jsxDEV("div",{className:"relative",children:[o.jsxDEV(ye,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 dark:text-gray-500"},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListToolbar.jsx",lineNumber:97,columnNumber:9},this),o.jsxDEV("input",{type:"text",placeholder:"노트 검색...",value:M,disabled:!y,onChange:i=>t(i.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-gray-800 dark:text-white border-none rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:bg-white dark:focus:bg-gray-700 transition-all disabled:opacity-50"},void 0,!1,{fileName:"D:/MEMO/src/components/NoteListToolbar.jsx",lineNumber:98,columnNumber:9},this)]},void 0,!0,{fileName:"D:/MEMO/src/components/NoteListToolbar.jsx",lineNumber:96,columnNumber:7},this)]},void 0,!0,{fileName:"D:/MEMO/src/components/NoteListToolbar.jsx",lineNumber:25,columnNumber:5},this)}const Ze=de.memo(Ye);function Ge({selectedNotes:s,itemData:e,reorderNote:r}){const[n,a]=p.useState(null);return{dragOverNoteId:n,handleDragStart:(h,g)=>{if(s.size>1&&s.has(g)){const d=document.createElement("div");d.className="bg-blue-600 text-white px-3 py-2 rounded-lg shadow-lg font-bold text-sm flex items-center gap-2 absolute top-[-9999px] left-[-9999px] z-50",d.innerHTML=`
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path><polyline points="14 2 14 8 20 8"></polyline></svg>
        ${s.size}개 이동
      `,document.body.appendChild(d),h.dataTransfer.setDragImage(d,0,0),setTimeout(()=>document.body.removeChild(d),0)}e.onDragStart&&e.onDragStart(h,g)},handleDragOver:(h,g)=>{h.preventDefault(),n!==g&&a(g)},handleDrop:(h,g)=>{h.preventDefault(),a(null);const d=h.dataTransfer.getData("text/plain");d&&g&&Number(d)!==g&&r(Number(d),g)}}}function Xe({noteListRef:s,width:e,onResizeStart:r,isSidebarOpen:n,toggleSidebar:a,showCalendar:u,setShowCalendar:m,showTodo:c,setShowTodo:h,selectedNotes:g,selectedCategory:d,setContextMenu:y,deleteMultipleNotes:j,setModals:w,dbReady:M,createNewNote:t,emptyTrash:i,searchTerm:l,setSearchTerm:b,calendarDate:f,setCalendarDate:v,reorderNote:N,filteredNotes:x,displayNotes:D,itemData:I,isLoading:C}){const{dragOverNoteId:L,handleDragStart:E,handleDragOver:U,handleDrop:H}=Ge({selectedNotes:g,itemData:I,reorderNote:N}),P=p.useRef(null),[q,G]=p.useState({width:0,height:0});p.useEffect(()=>{if(!P.current)return;const k=new ResizeObserver(O=>{for(const V of O)G({width:V.contentRect.width,height:V.contentRect.height})});return k.observe(P.current),()=>k.disconnect()},[]);const z=p.useRef({}),$=p.useCallback((k,O)=>{z.current[k]!==O&&(z.current[k]=O,S.current&&S.current.resetAfterIndex(k))},[]),X=p.useCallback(k=>z.current[k]||130,[]),_=p.useMemo(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(k=>{let O=1/0,V=!1;for(const B of k)if(B.target.dataset.index){const K=parseInt(B.target.dataset.index,10),ne=B.borderBoxSize?.[0]?.blockSize??B.contentRect.height;z.current[K]!==ne&&(z.current[K]=ne,K<O&&(O=K),V=!0)}V&&S.current&&S.current.resetAfterIndex(O)}),[]);p.useEffect(()=>()=>_?.disconnect(),[_]);const J=p.useCallback((k,O)=>{const V=O.notes[k];return V?V.id:k},[]);p.useEffect(()=>{S.current&&S.current.resetAfterIndex(0)},[q.width]);const Q=p.useMemo(()=>({...I,onDragStart:E,onDragOver:U,onDrop:H,dragOverNoteId:L,setSize:$,resizeObserver:_}),[I,E,U,H,L,$,_]),S=p.useRef(null),T=p.useRef(null),R=p.useCallback(()=>{if(!S.current)return;if(l){typeof S.current.scrollTo=="function"?S.current.scrollTo(0):S.current.element&&(S.current.element.scrollTop=0);return}const k=`scroll-pos-${d}`,O=localStorage.getItem(k),V=O?parseInt(O,10):0;typeof S.current.scrollTo=="function"?S.current.scrollTo(V):S.current.element&&(S.current.element.scrollTop=V)},[d,l]),be=p.useCallback(k=>{S.current=k,k&&R()},[R]);p.useEffect(()=>{R()},[R]);const ge=p.useCallback(({scrollOffset:k})=>{l||(T.current&&(window.cancelIdleCallback?window.cancelIdleCallback(T.current):clearTimeout(T.current)),window.requestIdleCallback?T.current=window.requestIdleCallback(()=>{const O=`scroll-pos-${d}`;localStorage.setItem(O,String(k))},{timeout:200}):T.current=setTimeout(()=>{const O=`scroll-pos-${d}`;localStorage.setItem(O,String(k))},150))},[d,l]);return p.useEffect(()=>()=>{T.current&&(window.cancelIdleCallback?window.cancelIdleCallback(T.current):clearTimeout(T.current))},[]),o.jsxDEV("div",{ref:s,className:"bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700 flex flex-col flex-shrink-0 z-10 relative transition-colors duration-200",style:{width:e},children:[o.jsxDEV("div",{className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-blue-500 transition-colors z-50 opacity-0 hover:opacity-100",style:{right:"-2px"},onMouseDown:r},void 0,!1,{fileName:"D:/MEMO/src/components/NoteList.jsx",lineNumber:214,columnNumber:7},this),o.jsxDEV(Ze,{isSidebarOpen:n,toggleSidebar:a,showCalendar:u,setShowCalendar:m,showTodo:c,setShowTodo:h,selectedNotes:g,selectedCategory:d,setContextMenu:y,deleteMultipleNotes:j,setModals:w,dbReady:M,createNewNote:t,emptyTrash:i,searchTerm:l,setSearchTerm:b},void 0,!1,{fileName:"D:/MEMO/src/components/NoteList.jsx",lineNumber:220,columnNumber:7},this),u&&o.jsxDEV(Ke,{notes:x,selectedDate:f,onSelectDate:v},void 0,!1,{fileName:"D:/MEMO/src/components/NoteList.jsx",lineNumber:240,columnNumber:9},this),o.jsxDEV("div",{className:"flex-1 overflow-hidden",ref:P,children:!M||C?o.jsxDEV("div",{className:"flex-1 flex items-center justify-center h-full",children:o.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"},void 0,!1,{fileName:"D:/MEMO/src/components/NoteList.jsx",lineNumber:251,columnNumber:13},this)},void 0,!1,{fileName:"D:/MEMO/src/components/NoteList.jsx",lineNumber:250,columnNumber:11},this):D.length===0?o.jsxDEV("div",{className:"p-8 text-center text-gray-400 dark:text-gray-400 text-sm",children:l?"검색 결과가 없습니다":c?"할 일이 있는 노트가 없습니다":"노트를 만들어보세요"},void 0,!1,{fileName:"D:/MEMO/src/components/NoteList.jsx",lineNumber:254,columnNumber:11},this):o.jsxDEV(qe,{height:q.height,width:q.width,itemCount:D.length,itemSize:X,estimatedItemSize:130,itemData:Q,itemKey:J,overscanCount:5,ref:be,onScroll:ge,children:Be},void 0,!1,{fileName:"D:/MEMO/src/components/NoteList.jsx",lineNumber:258,columnNumber:11},this)},void 0,!1,{fileName:"D:/MEMO/src/components/NoteList.jsx",lineNumber:248,columnNumber:7},this)]},void 0,!0,{fileName:"D:/MEMO/src/components/NoteList.jsx",lineNumber:209,columnNumber:5},this)}const rt=p.memo(Xe);export{rt as default};
